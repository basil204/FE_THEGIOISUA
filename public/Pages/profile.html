<section class="breadcrumb-section pt-0">
  <div class="container-fluid-lg">
    <div class="row">
      <div class="col-12">
        <div class="breadcrumb-contain">
          <h2>Trang tổng quan người dùng</h2>
          <nav>
            <ol class="breadcrumb mb-0">
              <li class="breadcrumb-item">
                <a href="index.html">
                  <i class="fa-solid fa-house"></i>
                </a>
              </li>
              <li class="breadcrumb-item active">Trang tổng quan người dùng</li>
            </ol>
          </nav>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- Breadcrumb Section End -->

<!-- User Dashboard Section Start -->
<section class="user-dashboard-section section-b-space">
  <div class="container-fluid-lg">
    <div class="row">
      <div class="col-xxl-3 col-lg-4">
        <div class="dashboard-left-sidebar">
          <div class="close-button d-flex d-lg-none">
            <button class="close-sidebar">
              <i class="fa-solid fa-xmark"></i>
            </button>
          </div>
          <div class="profile-box">
            <div class="cover-image">
              <img
                src="../assets/images/inner-page/cover-img.jpg"
                class="img-fluid blur-up lazyload"
                alt=""
              />
            </div>

            <div class="profile-contain">
              <div class="profile-image">
                <div class="position-relative">
                  <img
                    src="../assets/images/inner-page/user/1.jpg"
                    class="blur-up lazyload update_img"
                    alt=""
                  />
                  <div class="cover-icon">
                    <i class="fa-solid fa-pen">
                      <input type="file" onchange="readURL(this,0)" />
                    </i>
                  </div>
                </div>
              </div>

              <div class="profile-name">
                <h3>{{userData.fullName}}</h3>
                <h6 class="text-content">{{userData.email}}</h6>
              </div>
            </div>
          </div>

          <ul
            class="nav nav-pills user-nav-pills"
            id="pills-tab"
            role="tablist"
          >
            <li class="nav-item" role="presentation">
              <button
                class="nav-link active"
                id="pills-dashboard-tab"
                data-bs-toggle="pill"
                data-bs-target="#pills-dashboard"
                type="button"
              >
                <i data-feather="home"></i> Bảng điều khiển
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button
                class="nav-link"
                id="pills-order-tab"
                data-bs-toggle="pill"
                data-bs-target="#pills-order"
                type="button"
                ng-click="searchInvoices()"
              >
                <i data-feather="shopping-bag"></i>Hóa Đơn Của Tôi
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button
                class="nav-link"
                id="pills-log-tab"
                data-bs-toggle="pill"
                data-bs-target="#pills-log"
                type="button"
                ng-click="searchInvoices()"
              >
                <i data-feather="shopping-bag"></i>Lịch Sử Hệ Thống
              </button>
            </li>
            <li class="nav-item" role="presentation">
              <button
                class="nav-link"
                id="pills-profile-tab"
                data-bs-toggle="pill"
                data-bs-target="#pills-profile"
                type="button"
                role="tab"
              >
                <i data-feather="user"></i> Hồ sơ
              </button>
            </li>
            <li
              class="nav-item"
              role="presentation"
              ng-controller="LoginController"
            >
              <button class="nav-link" ng-click="logout()">
                <i data-feather="shield"></i> Đăng xuất
              </button>
            </li>
          </ul>
        </div>
      </div>

      <div class="col-xxl-9 col-lg-8">
        <button
          class="btn left-dashboard-show btn-animation btn-md fw-bold d-block mb-4 d-lg-none"
        >
          Show Menu
        </button>
        <div class="dashboard-right-sidebar">
          <div class="tab-content" id="pills-tabContent">
            <div
              class="tab-pane fade show active"
              id="pills-dashboard"
              role="tabpanel"
            >
              <div class="dashboard-home">
                <div class="title">
                  <h2>Trang tổng quan của tôi</h2>
                  <span class="title-leaf">
                    <svg class="icon-width bg-gray">
                      <use xlink:href="../assets/svg/leaf.svg#leaf"></use>
                    </svg>
                  </span>
                </div>

                <div class="dashboard-user-name">
                  <h6 class="text-content">
                    Xin Chào, <b class="text-title">{{userData.fullName}}</b>
                  </h6>
                </div>
                <div class="total-box">
                  <div class="row g-sm-4 g-3">
                    <div class="col-xxl-4 col-lg-6 col-md-4 col-sm-6">
                      <div class="total-contain">
                        <img
                          src="../assets/images/svg/order.svg"
                          class="img-1 blur-up lazyload"
                          alt=""
                        />
                        <img
                          src="../assets/images/svg/order.svg"
                          class="blur-up lazyload"
                          alt=""
                        />
                        <div class="total-detail">
                          <h5>Hóa Đơn Đã Mua</h5>
                          <h3>3658</h3>
                        </div>
                      </div>
                    </div>
                    <div class="col-xxl-4 col-lg-6 col-md-4 col-sm-6">
                      <div class="total-contain">
                        <img
                          src="../assets/images/svg/pending.svg"
                          class="img-1 blur-up lazyload"
                          alt=""
                        />
                        <img
                          src="../assets/images/svg/pending.svg"
                          class="blur-up lazyload"
                          alt=""
                        />
                        <div class="total-detail">
                          <h5>Hóa Đơn Đang Chờ Thanh Toán</h5>
                          <h3>{{isPayment ? 1 : 0}}</h3>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-pane fade" id="pills-order" role="tabpanel">
              <div class="dashboard-order">
                <div class="title">
                  <h2>Hoá Đơn Của Tôi</h2>
                  <span class="title-leaf title-leaf-gray">
                    <svg class="icon-width bg-gray">
                      <use xlink:href="../assets/svg/leaf.svg#leaf"></use>
                    </svg>
                  </span>
                </div>
              </div>

              <!-- Tabs Navigation -->
              <ul
                class="nav nav-pills flex-column flex-sm-row"
                id="pills-tab"
                role="tablist"
              >
                <li class="nav-item" role="presentation">
                  <a
                    class="nav-link active"
                    id="tab-1"
                    data-bs-toggle="pill"
                    href="#tab-content-1"
                    role="tab"
                    aria-controls="tab-content-1"
                    aria-selected="true"
                    ng-click="search.trangThai = null; searchInvoices()"
                    >Tất cả</a
                  >
                </li>

                <a
                  class="nav-link"
                  id="tab-2"
                  data-bs-toggle="pill"
                  href="#tab-content-2"
                  role="tab"
                  aria-controls="tab-content-2"
                  aria-selected="false"
                  ng-click="search.trangThai = 301; searchInvoices()"
                  >Chờ Duyệt</a
                >

                <li class="nav-item" role="presentation">
                  <a
                    class="nav-link"
                    id="tab-3"
                    data-bs-toggle="pill"
                    href="#tab-content-3"
                    role="tab"
                    aria-controls="tab-content-3"
                    aria-selected="false"
                    ng-click="search.trangThai = 903; searchInvoices()"
                    >Đã Lấy hàng</a
                  >
                </li>
                <li class="nav-item" role="presentation">
                  <a
                    class="nav-link"
                    id="tab-4"
                    data-bs-toggle="pill"
                    href="#tab-content-4"
                    role="tab"
                    aria-controls="tab-content-4"
                    aria-selected="false"
                    ng-click="search.trangThai = 904; searchInvoices()"
                    >Giao Hàng</a
                  >
                </li>
                <li class="nav-item" role="presentation">
                  <a
                    class="nav-link"
                    id="tab-5"
                    data-bs-toggle="pill"
                    href="#tab-content-5"
                    role="tab"
                    aria-controls="tab-content-5"
                    aria-selected="false"
                    ng-click="search.trangThai = 913; searchInvoices()"
                    >Hoàn Thành</a
                  >
                </li>
                <li class="nav-item" role="presentation">
                  <a
                    class="nav-link"
                    id="tab-6"
                    data-bs-toggle="pill"
                    href="#tab-content-6"
                    role="tab"
                    aria-controls="tab-content-6"
                    ng-click="search.trangThai = 336; searchInvoices()"
                    aria-selected="false"
                    >Hủy</a
                  >
                </li>
              </ul>

              <!-- Tabs Content -->
              <div class="tab-content" id="pills-tabContent">
                <!-- Tab 1 -->
                <div
                  class="tab-pane fade show active"
                  id="tab-content-1"
                  role="tabpanel"
                  aria-labelledby="tab-1"
                >
                  <div class="form-group">
                    <label for="startDate">Chọn Ngày</label>
                    <input
                      type="datetime-local"
                      id="startDate"
                      class="form-control"
                      ng-model="search.startDate"
                      ng-change="searchInvoices()"
                    />
                  </div>

                  <div class="table-container table-responsive">
                    <table class="table table-striped table-hover custom-table">
                      <thead class="thead-dark">
                        <tr>
                          <th>Mã Hóa Đơn</th>
                          <th>Tên Khách Hàng</th>
                          <th>Người Duyệt</th>
                          <th>Người Nhận Hàng</th>
                          <th>Ngày Tạo</th>
                          <th>Phương Thức Thanh Toán</th>
                          <th>Voucher</th>
                          <th>Trạng Thái</th>
                          <th>Thao Tác</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr ng-repeat="invoice in userInvoices">
                          <td>{{invoice.invoiceCode}}</td>
                          <td>{{invoice.nguoiMua}}</td>
                          <td>{{invoice.nguoiDuyetDon}}</td>
                          <td>{{invoice.nguoiNhanHang}}</td>
                          <td>{{invoice.ngayTao}}</td>
                          <td>{{invoice.paymentmethod}}</td>
                          <td>{{invoice.voucherCode}}</td>
                          <td>{{getStatus(invoice.trangThai)}}</td>
                          <td>
                            <button
                              class="btn btn-secondary btn-sm view-btn"
                              ng-click="getInvoiceDetailByUser(invoice)"
                            >
                              Xem Chi Tiết
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                    <div
                      class="pagination-controls d-flex justify-content-center align-items-center my-3"
                    >
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === 0"
                        ng-click="goToFirstPage()"
                      >
                        First
                      </button>
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === 0"
                        ng-click="previousPage()"
                      >
                        Previous
                      </button>
                      <span class="mx-2"
                        >Page {{ currentPage + 1 }} of {{ pageInfo.totalPages
                        }}</span
                      >
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === pageInfo.totalPages - 1"
                        ng-click="nextPage()"
                      >
                        Next
                      </button>
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === pageInfo.totalPages - 1"
                        ng-click="goToLastPage()"
                      >
                        Last
                      </button>
                    </div>
                  </div>
                </div>

                <!-- Tab 2 -->
                <div
                  class="tab-pane fade"
                  id="tab-content-2"
                  role="tabpanel"
                  aria-labelledby="tab-2"
                >
                  <div class="form-group">
                    <label for="startDate">Chọn Ngày</label>
                    <input
                      type="datetime-local"
                      id="startDate"
                      class="form-control"
                      ng-model="search.startDate"
                      ng-change="searchInvoices()"
                    />
                  </div>

                  <div class="table-container table-responsive">
                    <table class="table table-striped table-hover custom-table">
                      <thead class="thead-dark">
                        <tr>
                          <th>Mã Hóa Đơn</th>
                          <th>Tên Khách Hàng</th>
                          <th>Người Duyệt</th>
                          <th>Người Nhận Hàng</th>
                          <th>Ngày Tạo</th>
                          <th>Phương Thức Thanh Toán</th>
                          <th>Voucher</th>
                          <th>Trạng Thái</th>
                          <th>Thao Tác</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr ng-repeat="invoice in userInvoices">
                          <td>{{invoice.invoiceCode}}</td>
                          <td>{{invoice.nguoiMua}}</td>
                          <td>{{invoice.nguoiDuyetDon}}</td>
                          <td>{{invoice.nguoiNhanHang}}</td>
                          <td>{{invoice.ngayTao}}</td>
                          <td>{{invoice.paymentmethod}}</td>
                          <td>{{invoice.voucherCode}}</td>
                          <td>{{getStatus(invoice.trangThai)}}</td>
                          <td>
                            <button
                              class="btn btn-secondary btn-sm view-btn"
                              ng-click="getInvoiceDetailByUser(invoice)"
                            >
                              Xem Chi Tiết
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                    <div
                      class="pagination-controls d-flex justify-content-center align-items-center my-3"
                    >
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === 0"
                        ng-click="goToFirstPage()"
                      >
                        First
                      </button>
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === 0"
                        ng-click="previousPage()"
                      >
                        Previous
                      </button>
                      <span class="mx-2"
                        >Page {{ currentPage + 1 }} of {{ pageInfo.totalPages
                        }}</span
                      >
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === pageInfo.totalPages - 1"
                        ng-click="nextPage()"
                      >
                        Next
                      </button>
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === pageInfo.totalPages - 1"
                        ng-click="goToLastPage()"
                      >
                        Last
                      </button>
                    </div>
                  </div>
                </div>

                <!-- Tab 3 -->
                <div
                  class="tab-pane fade"
                  id="tab-content-3"
                  role="tabpanel"
                  aria-labelledby="tab-3"
                >
                  <div class="form-group">
                    <label for="startDate">Chọn Ngày</label>
                    <input
                      type="datetime-local"
                      id="startDate"
                      class="form-control"
                      ng-model="search.startDate"
                      ng-change="searchInvoices()"
                    />
                  </div>

                  <div class="table-container table-responsive">
                    <table class="table table-striped table-hover custom-table">
                      <thead class="thead-dark">
                        <tr>
                          <th>Mã Hóa Đơn</th>
                          <th>Tên Khách Hàng</th>
                          <th>Người Duyệt</th>
                          <th>Người Nhận Hàng</th>
                          <th>Ngày Tạo</th>
                          <th>Phương Thức Thanh Toán</th>
                          <th>Voucher</th>
                          <th>Trạng Thái</th>
                          <th>Thao Tác</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr ng-repeat="invoice in userInvoices">
                          <td>{{invoice.invoiceCode}}</td>
                          <td>{{invoice.nguoiMua}}</td>
                          <td>{{invoice.nguoiDuyetDon}}</td>
                          <td>{{invoice.nguoiNhanHang}}</td>
                          <td>{{invoice.ngayTao}}</td>
                          <td>{{invoice.paymentmethod}}</td>
                          <td>{{invoice.voucherCode}}</td>
                          <td>{{getStatus(invoice.trangThai)}}</td>
                          <td>
                            <button
                              class="btn btn-secondary btn-sm view-btn"
                              ng-click="getInvoiceDetailByUser(invoice)"
                            >
                              Xem Chi Tiết
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                    <div
                      class="pagination-controls d-flex justify-content-center align-items-center my-3"
                    >
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === 0"
                        ng-click="goToFirstPage()"
                      >
                        First
                      </button>
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === 0"
                        ng-click="previousPage()"
                      >
                        Previous
                      </button>
                      <span class="mx-2"
                        >Page {{ currentPage + 1 }} of {{ pageInfo.totalPages
                        }}</span
                      >
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === pageInfo.totalPages - 1"
                        ng-click="nextPage()"
                      >
                        Next
                      </button>
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === pageInfo.totalPages - 1"
                        ng-click="goToLastPage()"
                      >
                        Last
                      </button>
                    </div>
                  </div>
                </div>

                <!-- Tab 4 -->
                <div
                  class="tab-pane fade"
                  id="tab-content-4"
                  role="tabpanel"
                  aria-labelledby="tab-4"
                >
                  <div class="form-group">
                    <label for="startDate">Chọn Ngày</label>
                    <input
                      type="datetime-local"
                      id="startDate"
                      class="form-control"
                      ng-model="search.startDate"
                      ng-change="searchInvoices()"
                    />
                  </div>

                  <div class="table-container table-responsive">
                    <table class="table table-striped table-hover custom-table">
                      <thead class="thead-dark">
                        <tr>
                          <th>Mã Hóa Đơn</th>
                          <th>Tên Khách Hàng</th>
                          <th>Người Duyệt</th>
                          <th>Người Nhận Hàng</th>
                          <th>Ngày Tạo</th>
                          <th>Phương Thức Thanh Toán</th>
                          <th>Voucher</th>
                          <th>Trạng Thái</th>
                          <th>Thao Tác</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr ng-repeat="invoice in userInvoices">
                          <td>{{invoice.invoiceCode}}</td>
                          <td>{{invoice.nguoiMua}}</td>
                          <td>{{invoice.nguoiDuyetDon}}</td>
                          <td>{{invoice.nguoiNhanHang}}</td>
                          <td>{{invoice.ngayTao}}</td>
                          <td>{{invoice.paymentmethod}}</td>
                          <td>{{invoice.voucherCode}}</td>
                          <td>{{getStatus(invoice.trangThai)}}</td>
                          <td>
                            <button
                              class="btn btn-secondary btn-sm view-btn"
                              ng-click="getInvoiceDetailByUser(invoice)"
                            >
                              Xem Chi Tiết
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                    <div
                      class="pagination-controls d-flex justify-content-center align-items-center my-3"
                    >
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === 0"
                        ng-click="goToFirstPage()"
                      >
                        First
                      </button>
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === 0"
                        ng-click="previousPage()"
                      >
                        Previous
                      </button>
                      <span class="mx-2"
                        >Page {{ currentPage + 1 }} of {{ pageInfo.totalPages
                        }}</span
                      >
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === pageInfo.totalPages - 1"
                        ng-click="nextPage()"
                      >
                        Next
                      </button>
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === pageInfo.totalPages - 1"
                        ng-click="goToLastPage()"
                      >
                        Last
                      </button>
                    </div>
                  </div>
                </div>

                <!-- Tab 5 -->
                <div
                  class="tab-pane fade"
                  id="tab-content-5"
                  role="tabpanel"
                  aria-labelledby="tab-5"
                >
                  <div class="form-group">
                    <label for="startDate">Chọn Ngày</label>
                    <input
                      type="datetime-local"
                      id="startDate"
                      class="form-control"
                      ng-model="search.startDate"
                      ng-change="searchInvoices()"
                    />
                  </div>

                  <div class="table-container table-responsive">
                    <table class="table table-striped table-hover custom-table">
                      <thead class="thead-dark">
                        <tr>
                          <th>Mã Hóa Đơn</th>
                          <th>Tên Khách Hàng</th>
                          <th>Người Duyệt</th>
                          <th>Người Nhận Hàng</th>
                          <th>Ngày Tạo</th>
                          <th>Phương Thức Thanh Toán</th>
                          <th>Voucher</th>
                          <th>Trạng Thái</th>
                          <th>Thao Tác</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr ng-repeat="invoice in userInvoices">
                          <td>{{invoice.invoiceCode}}</td>
                          <td>{{invoice.nguoiMua}}</td>
                          <td>{{invoice.nguoiDuyetDon}}</td>
                          <td>{{invoice.nguoiNhanHang}}</td>
                          <td>{{invoice.ngayTao}}</td>
                          <td>{{invoice.paymentmethod}}</td>
                          <td>{{invoice.voucherCode}}</td>
                          <td>{{getStatus(invoice.trangThai)}}</td>
                          <td>
                            <button
                              class="btn btn-secondary btn-sm view-btn"
                              ng-click="getInvoiceDetailByUser(invoice)"
                            >
                              Xem Chi Tiết
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                    <div
                      class="pagination-controls d-flex justify-content-center align-items-center my-3"
                    >
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === 0"
                        ng-click="goToFirstPage()"
                      >
                        First
                      </button>
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === 0"
                        ng-click="previousPage()"
                      >
                        Previous
                      </button>
                      <span class="mx-2"
                        >Page {{ currentPage + 1 }} of {{ pageInfo.totalPages
                        }}</span
                      >
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === pageInfo.totalPages - 1"
                        ng-click="nextPage()"
                      >
                        Next
                      </button>
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === pageInfo.totalPages - 1"
                        ng-click="goToLastPage()"
                      >
                        Last
                      </button>
                    </div>
                  </div>
                </div>

                <!-- Tab 6 -->
                <div
                  class="tab-pane fade"
                  id="tab-content-6"
                  role="tabpanel"
                  aria-labelledby="tab-6"
                >
                  <div class="form-group">
                    <label for="startDate">Chọn Ngày</label>
                    <input
                      type="datetime-local"
                      id="startDate"
                      class="form-control"
                      ng-model="search.startDate"
                      ng-change="searchInvoices()"
                    />
                  </div>

                  <div class="table-container table-responsive">
                    <table class="table table-striped table-hover custom-table">
                      <thead class="thead-dark">
                        <tr>
                          <th>Mã Hóa Đơn</th>
                          <th>Tên Khách Hàng</th>
                          <th>Người Duyệt</th>
                          <th>Người Nhận Hàng</th>
                          <th>Ngày Tạo</th>
                          <th>Phương Thức Thanh Toán</th>
                          <th>Voucher</th>
                          <th>Trạng Thái</th>
                          <th>Thao Tác</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr ng-repeat="invoice in userInvoices">
                          <td>{{invoice.invoiceCode}}</td>
                          <td>{{invoice.nguoiMua}}</td>
                          <td>{{invoice.nguoiDuyetDon}}</td>
                          <td>{{invoice.nguoiNhanHang}}</td>
                          <td>{{invoice.ngayTao}}</td>
                          <td>{{invoice.paymentmethod}}</td>
                          <td>{{invoice.voucherCode}}</td>
                          <td>{{getStatus(invoice.trangThai)}}</td>
                          <td>
                            <button
                              class="btn btn-secondary btn-sm view-btn"
                              ng-click="getInvoiceDetailByUser(invoice)"
                            >
                              Xem Chi Tiết
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                    <div
                      class="pagination-controls d-flex justify-content-center align-items-center my-3"
                    >
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === 0"
                        ng-click="goToFirstPage()"
                      >
                        First
                      </button>
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === 0"
                        ng-click="previousPage()"
                      >
                        Previous
                      </button>
                      <span class="mx-2"
                        >Page {{ currentPage + 1 }} of {{ pageInfo.totalPages
                        }}</span
                      >
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === pageInfo.totalPages - 1"
                        ng-click="nextPage()"
                      >
                        Next
                      </button>
                      <button
                        class="btn btn-primary mx-2"
                        ng-disabled="currentPage === pageInfo.totalPages - 1"
                        ng-click="goToLastPage()"
                      >
                        Last
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div
              class="tab-pane fade"
              id="pills-log"
              role="tabpanel"
              ng-controller="LogController"
            >
              <div class="dashboard-order">
                <div class="title text-center mb-4">
                  <h2 class="text-primary">Lịch sử Hệ Thống</h2>
                  <span class="title-leaf title-leaf-gray">
                    <svg class="icon-width bg-gray">
                      <use xlink:href="../assets/svg/leaf.svg#leaf"></use>
                    </svg>
                  </span>
                </div>
              </div>
              <div class="table-container table-responsive">
                <table
                  class="table table-striped table-hover custom-table shadow-sm"
                >
                  <thead class="thead-dark">
                    <tr>
                      <th class="text-center">Người thực hiện</th>
                      <th class="text-center">Hành động</th>
                      <th class="text-center">Thời gian</th>
                      <th class="text-center">Chi tiết</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr ng-repeat="log in systemLogs" class="align-middle">
                      <td data-label="Người thực hiện" class="text-center">
                        {{log.user.username}}
                      </td>
                      <td data-label="Hành động" class="text-center">
                        {{log.action}}
                      </td>
                      <td data-label="Thời gian" class="text-center">
                        {{ log.created_at | date:'dd-MM-yyyy|HH:mm:ss' : '+0000'
                        }}
                      </td>
                      <td data-label="Chi tiết" class="text-center">
                        {{log.description}}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div
                class="pagination-container d-flex justify-content-between align-items-center mt-4"
              >
                <button
                  class="btn btn-outline-primary"
                  ng-click="changePage(page.number - 1)"
                  ng-disabled="page.number === 0"
                >
                  <i class="bi bi-arrow-left-circle"></i> Trước
                </button>
                <span class="fw-bold"
                  >Trang {{page.number + 1}} / {{page.totalPages}}</span
                >
                <button
                  class="btn btn-outline-primary"
                  ng-click="changePage(page.number + 1)"
                  ng-disabled="page.number === page.totalPages - 1"
                >
                  Tiếp <i class="bi bi-arrow-right-circle"></i>
                </button>
              </div>
            </div>

            <div class="tab-pane fade" id="pills-profile" role="tabpanel">
              <div class="dashboard-profile">
                <div class="title">
                  <h2>Hồ sơ của tôi</h2>
                  <span class="title-leaf">
                    <svg class="icon-width bg-gray">
                      <use xlink:href="../assets/svg/leaf.svg#leaf"></use>
                    </svg>
                  </span>
                </div>

                <div class="profile-detail dashboard-bg-box"></div>

                <div class="profile-about dashboard-bg-box">
                  <div class="row">
                    <div class="col-xxl-7">
                      <div class="dashboard-title mb-3">
                        <h3>Hồ sơ Giới thiệu</h3>
                      </div>

                      <div>
                        <table class="table">
                          <tbody>
                            <tr>
                              <td>Tên đầy đủ :</td>
                              <td>
                                <a
                                  href="javascript:void(0)"
                                  data-bs-toggle="modal"
                                  data-bs-target="#add-fullName"
                                >
                                  {{userData.fullName ? userData.fullName : 'Bâm
                                  để thêm tên đầy đủ'}}
                                </a>
                              </td>
                            </tr>

                            <tr>
                              <td>Email :</td>
                              <td>
                                <a>{{userData.email}}</a>
                              </td>
                              <td></td>
                            </tr>
                            <tr>
                              <td>Số điện thoại :</td>
                              <td>
                                <a
                                  href="javascript:void(0)"
                                  data-bs-toggle="modal"
                                  data-bs-target="#add-phoneNumber"
                                >
                                  {{userData.phoneNumber ? userData.phoneNumber
                                  : 'Bâm để thêm số điện thoại'}}
                                </a>
                              </td>
                            </tr>

                            <tr>
                              <td>Địa chỉ :</td>
                              <td>
                                <a
                                  href="javascript:void(0)"
                                  data-bs-toggle="modal"
                                  data-bs-target="#add-address"
                                  class="d-inline-block text-truncate"
                                  style="max-width: 500px"
                                >
                                  {{userData.address ? userData.address : 'Bấm
                                  để thêm địa chỉ'}}
                                </a>
                              </td>
                            </tr>

                            <tr>
                              <td>Ngày đăng ký :</td>
                              <td>
                                <a>{{userData.registrationDate}}</a>
                              </td>
                              <td></td>
                            </tr>
                          </tbody>
                        </table>
                      </div>

                      <div class="dashboard-title mb-3">
                        <h3>Chi tiết đăng nhập</h3>
                      </div>

                      <div class="table-responsive">
                        <table class="table">
                          <tbody>
                            <tr>
                              <a
                                data-bs-toggle="modal"
                                data-bs-target="#changePassword"
                                href="javascript:void(0)"
                                >Thay đổi mật khẩu</a
                              >
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>

                    <div class="col-xxl-5">
                      <div class="profile-image">
                        <img
                          src="../assets/images/inner-page/dashboard-profile.png"
                          class="img-fluid blur-up lazyload"
                          alt=""
                        />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- User Dashboard Section End -->

<!-- Footer Section Start -->

<!-- Tap to top and theme setting button end -->

<!-- Bg overlay Start -->
<div class="bg-overlay"></div>
<!-- Bg overlay End -->

<!-- Add address modal box start -->
<div class="modal fade theme-modal" id="add-address" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered modal-fullscreen-sm-down">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Thêm địa chỉ mới</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>
      <div class="modal-body">
        <!-- Dropdown for Tỉnh -->
        <div class="form-group mb-3">
          <label for="tinhSelect">Tỉnh Thành</label>
          <select
            id="tinhSelect"
            class="form-control css_select"
            ng-model="selectedTinh"
            ng-change="loadQuan(); getTinhName()"
            ng-options="tinh.id as tinh.name for tinh in tinhs"
          >
            <option value="">Chọn Tỉnh Thành</option>
          </select>
          <span ng-if="tinhName" class="d-block mt-1 text-secondary"
            >Tên Tỉnh: {{ tinhName }}</span
          >
        </div>

        <!-- Dropdown for Quận -->
        <div class="form-group mb-3">
          <label for="quanSelect">Quận Huyện</label>
          <select
            id="quanSelect"
            class="form-control css_select"
            ng-model="selectedQuan"
            ng-change="loadPhuong(); getQuanName()"
            ng-options="quan.id as quan.name for quan in quans"
          >
            <option value="">Chọn Quận Huyện</option>
          </select>
          <span ng-if="quanName" class="d-block mt-1 text-secondary"
            >Tên Quận: {{ quanName }}</span
          >
        </div>
        <!-- Địa Chỉ Chi Tiết -->
        <form>
          <div class="form-floating mb-4 theme-form-floating">
            <input
              type="text"
              class="form-control"
              id="detailAddress"
              ng-model="detailAddress"
              placeholder=" "
            />
            <label for="detailAddress">Địa Chỉ Chi Tiết</label>
          </div>
        </form>
      </div>

      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-secondary btn-md"
          data-bs-dismiss="modal"
        >
          Đóng
        </button>
        <button
          type="button"
          class="btn theme-bg-color btn-md text-white"
          data-bs-dismiss="modal"
          ng-click="addAdress()"
        >
          Lưu thay đổi
        </button>
      </div>
    </div>
  </div>
</div>
<!-- Add address modal box end -->
<div class="modal fade theme-modal" id="add-phoneNumber" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered modal-fullscreen-sm-down">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Add Phone Number</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>

      <div class="modal-body">
        <!-- Nhập Số Điện Thoại -->
        <form>
          <div class="form-floating mb-4 theme-form-floating">
            <input
              type="text"
              class="form-control"
              id="phonenumber"
              ng-model="phonenumber"
              placeholder=" "
            />
            <label for="phonenumber">Add Phone Number</label>
          </div>
        </form>
      </div>

      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-secondary btn-md"
          data-bs-dismiss="modal"
        >
          Close
        </button>
        <button
          type="button"
          class="btn theme-bg-color btn-md text-white"
          data-bs-dismiss="modal"
          ng-click="addPhoneNumber()"
        >
          Save changes
        </button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade theme-modal" id="add-fullName" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered modal-fullscreen-sm-down">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Thêm tên đầy đủ</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>

      <div class="modal-body">
        <form>
          <div class="form-floating mb-4 theme-form-floating">
            <input
              type="text"
              class="form-control"
              id="fullname"
              ng-model="fullname"
              placeholder=" "
            />
            <label for="phonenumber">Thêm tên đầy đủ</label>
          </div>
        </form>
      </div>

      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-secondary btn-md"
          data-bs-dismiss="modal"
        >
          Đóng
        </button>
        <button
          type="button"
          class="btn theme-bg-color btn-md text-white"
          data-bs-dismiss="modal"
          ng-click="addFullName()"
        >
          Lưu thay đổi
        </button>
      </div>
    </div>
  </div>
</div>
<div
  class="modal fade theme-modal"
  id="changePassword"
  tabindex="-1"
  ng-controller="LoginController"
>
  <div
    class="modal-dialog modal-lg modal-dialog-centered modal-fullscreen-sm-down"
  >
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel2">Thay đổi mật khẩu</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="row g-4">
          <div class="col-xxl-12">
            <div class="form-floating theme-form-floating">
              <input
                type="password"
                class="form-control"
                ng-model="currentPassword"
                placeholder="Current Password"
              />
              <label for="currentPassword">Mật khẩu hiện tại</label>
            </div>
          </div>
          <div class="col-xxl-12">
            <div class="form-floating theme-form-floating">
              <input
                type="password"
                class="form-control"
                ng-model="newPassword"
                placeholder="New Password"
              />
              <label for="newPassword">Mật khẩu mới</label>
            </div>
          </div>
          <div class="col-xxl-12">
            <div class="form-floating theme-form-floating">
              <input
                type="password"
                class="form-control"
                ng-model="confirmNewPassword"
                placeholder="Confirm New Password"
              />
              <label for="confirmNewPassword">Xác nhận mật khẩu mới</label>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-animation btn-md fw-bold"
          data-bs-dismiss="modal"
        >
          Đóng
        </button>
        <button
          type="button"
          class="btn theme-bg-color btn-md fw-bold text-light"
          ng-click="changePassword()"
        >
          Lưu thay đổi
        </button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade theme-modal" id="optimized-invoice" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered modal-fullscreen-sm-down">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Chi Tiết Hóa Đơn</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>

      <div class="modal-body">
        <div class="mb-3">
          <strong>Số Hóa Đơn:</strong>
          <span id="invoiceNumber">{{invoice.invoiceCode}}</span><br />
          <strong>Ngày Tạo Hóa Đơn:</strong>
          <span id="invoiceDate">{{invoice.ngayTao}}</span><br />
          <strong>Địa Chỉ Nhận Hàng:</strong>
          <span id="">{{invoice.deliveryaddress}}</span><br />
          <strong>Số Điện Thoại:</strong>
          <span id="">{{invoice.phonenumber}}</span><br />
          <strong>Tổng Số Tiền:</strong>
          <span id="amount"
            >{{invoice.tongTien+invoice.sotienGiamGia | number:''}} VNĐ</span
          ><br />
          <strong>Số Tiền Được Giảm:</strong>
          <span id="invoiceDate">{{invoice.sotienGiamGia | number:''}} VNĐ</span
          ><br />
          <strong>Số Tiền Phải Thanh Toán:</strong>
          <span id="invoiceDate">{{invoice.tongTien | number:''}} VNĐ</span
          ><br />
          <strong>Phương Thức Thanh Toán:</strong>
          <span id="description">{{invoice.paymentmethod}}</span><br />
        </div>

        <h6>Chi Tiết Sản Phẩm:</h6>
        <table class="table">
          <thead>
            <tr>
              <th>Tên Sản Phẩm</th>
              <th>Số Lượng</th>
              <th>Giá</th>
              <th>Tổng</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="x in invoiceDetails">
              <td data-label="Tên Sản Phẩm">
                {{x.packagingunitname}} {{x.milkTypename}} {{x.milkbrandname}}
                {{x.milktastename}} {{x.capacity}} {{x.unit}}
              </td>
              <td data-label="Số Lượng">{{x.quantity}}</td>
              <td data-label="Giá">{{x.price | number:''}} VNĐ</td>
              <td data-label="Tổng">{{x.totalprice | number:''}} VNĐ</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Đóng
        </button>
        <button
          type="button"
          class="btn btn-secondary"
          data-bs-dismiss="modal"
          ng-hide="invoice.trangThai != 335"
          ng-click="payment(invoice.tongTien,invoice.invoiceCode)"
        >
          Thanh Toán
        </button>
        <button
          type="button"
          class="btn btn-secondary"
          data-bs-dismiss="modal"
          ng-hide="invoice.trangThai != 335 && invoice.trangThai != 301"
          ng-click="cancelInvoice(invoice.invoiceID)"
        >
          Hủy Đơn Hàng
        </button>
      </div>
    </div>
  </div>
</div>
